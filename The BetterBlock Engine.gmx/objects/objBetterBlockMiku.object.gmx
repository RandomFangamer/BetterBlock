<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sprBetterBlockMiku</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>1000</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Song Name: Shinitagari
timer = 0;
bgm = audio_play_sound(musBetterBlockMiku,0,0);
global.noPause = true;
angle = 45;
i = 0;
blackAlpha = 1;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.noPause = false;
audio_stop_sound(musBetterBlockMiku);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Reactivate Donut Blocks
with (objBetterBlockDonutBlock){
    if (!active &amp;&amp; speed == 0){
        active = true;
        xOrigin = x;
        yOrigin = y;
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Avoidance Position "Jumping"
var timerOld = timer; //check if the time has changed to update music

if (scrButtonCheckPressed(global.skipButton) &amp;&amp; (timer &lt; 443 || global.debugMode)) timer = 443; //Skips fade in, even when playing without dev tools IF the avoidance hasn't gotten to the first attack
if (global.debugMode){ //Dev tools
    if (keyboard_check_pressed(ord('1'))) timer = 931;
    if (keyboard_check_pressed(ord('2'))) timer = 1387;
    if (keyboard_check_pressed(ord('3'))) timer = 1958;
    if (keyboard_check_pressed(ord('4'))) timer = 2078;
    if (keyboard_check_pressed(ord('5'))) timer = 2892;
    if (keyboard_check_pressed(ord('6'))) timer = 3344;
}
//Update music
if (audio_exists(bgm)){
    if (timer != timerOld){
        audio_sound_set_track_position(bgm,timer/50);
        with (objPlayer) frozen = false;
    }
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Timer
if (instance_exists(objPlayer) || timer &gt; 4040){ //player is destroyed during ending
    //Single-Frame Attacks
    switch(timer){
        case 0:
            var t_block = instance_create(384, 288, objBetterBlock);
            t_block.visible = true;
            with (objPlayer) frozen = true;
            break;
        case 50:
            with (objPlayer) frozen = false;
            break;
        case 443:
            with (objBetterBlock)
                if (object_index == objBetterBlock)
                    vspeed = 1;
            for(i=-3;i&lt;=3;i++){
                with (instance_create(170, 150, objBetterBlockAvoP01)){
                    range = 8*other.i;
                    x+=32*other.i;
                    y += range;
                }
            }
            break;
        case 462:
            with (objBetterBlock)
                if (object_index == objBetterBlock)
                    vspeed = 8;
            break;
        case 677:
            with (objBetterBlock)
                if (vspeed == 8)
                    instance_destroy(); //remove the starter block
            for(i=-3;i&lt;=3;i++){
                with (instance_create(630,150,objBetterBlockAvoP01)){
                    alarm[0] = 8;
                    range = 8*other.i;
                    x += 32*other.i;
                    y += range;
                }
            }
            break;
        case 861: //fallthrough
            with (objBetterBlockAvoP01){
                gravity = 0.15;
                vspeed = -3.5;
                hspeed = (x-xstart)/36;
                alarm[1] = 0;
            }
        case 875:
        case 889:
            with (objBetterBlockAvoB01){
                y -= 45;
                yDest -= 45;
                yprevious = y;
            }
            with (objPlayer){
                var t_block;
                t_block = instance_place(x, y, objBetterBlockAvoB01);
                if (t_block != noone) y = t_block.bbox_top - bottomToOrigin; //move the player above the block\
            }
            break;
        case 1037:
        case 1264:
            with (objBetterBlockAvoP02) speed *= -1;
            angle = 5;
            break;
        case 1387:
            i = 0; //for donut blocks
            break;
        case 1733:
        case 1761:
        case 1788:
        case 1818:
            with (objBetterBlockAvoB03) image_blend = make_color_rgb(115,115,115);
            with (objBetterBlockAvoP04) image_blend = make_color_rgb(115,115,115);
            break;
        case 1746:
        case 1775:
        case 1804:
        case 1833:
            with (objBetterBlockAvoB03) image_blend = c_white;
            with (objBetterBlockAvoP04) image_blend = c_white;
            break;
        case 1847:
            with (objBetterBlockAvoB03){direction = 180;speed = 6;circle = true;friction = 0;}
            with (objBetterBlockAvoP04){direction = 180;speed = 6;circle = true;friction = 0;}
            break;
        case 1906:
            with (objBetterBlockAvoB03){
                speed = 0;
                friction = 0;
                direction = point_direction(xstart,ystart,x+16,y+16);
                acc = true;
                circle = false;
            }
            with (objBetterBlockAvoP04){
                speed = 0;
                friction = 0;
                acc = true;
                direction = point_direction(xstart,ystart,x+16,y+8);
                circle = false;
            }
            break;
        case 1958:
            instance_create(x-97,y+140,objBetterBlockAvoB04);
            break;
        case 2014:
            with (instance_create(x-97,y+140,objBetterBlockAvoB04)) projNum = 18;
            break;
        case 2190:
            for(i=0;i&lt;19;i++){
                instance_create(-32,i*32,objBetterBlockAvoB02);
            }
            break;
        case 2249:
            for(i=0;i&lt;19;i++){
                instance_create(800,i*32,objBetterBlockAvoB02);
            }
            break;
        case 2309:
            with (objBetterBlockAvoB02){
                if (x &gt; 400) alarm[0] = (1+(y/32));
                else alarm[0] = 18 - (y/32);
                if (alarm[0] &gt; 0) alarm[0] *= 6;
                else alarm[0] = 1; //prevents alarm[0] from never activating.
            }
            break;
        case 2422:
            scrMakeCircle(388, 292, 11.25, 8, 4, objBetterBlockAvoB05);
            break;
        case 2480:
            i = 1; //bottom platform bursts
            with (objBetterBlockAvoB05){
                friction = 0;
                move_towards_point(objPlayer.x, objPlayer.y, 8.5);
            }
            break;
        case 2650:
            with (objBetterBlockDonutBlock){
                if (x &lt;= 384){
                    instance_create(x, y, objBetterBlockAvoDonutBlock);
                    instance_destroy();
                }
            }
            break;
        case 2707:
            with (objBetterBlockDonutBlock){
                if (x &gt; 384){
                    instance_create(x, y, objBetterBlockAvoDonutBlock);
                    instance_destroy();
                }
            }
            break;
        case 2765:
            with (objBetterBlockAvoDonutBlock){
                vspeed = 0.3;
            }
            with (objBetterBlockAvoP05b) speed /= 6;
            break;
        case 2882:
            with (objBetterBlockAvoDonutBlock) vspeed = 8;
            with (objBetterBlockAvoP05b) move_towards_point(objPlayer.x, objPlayer.y, -40);
            break;
        case 3344:
            with (instance_create(400,304,objBetterBlockAvoP06)) direction = 45;
            break;
        case 3399:
            with (instance_create(400,304,objBetterBlockAvoP06)) direction = 135;
            break;
        case 3459:
            with (instance_create(400,304,objBetterBlockAvoP06)) direction = 225;
            break;
        case 3515:
            with (instance_create(400,304,objBetterBlockAvoP06)) direction = 315;
            break;
        case 3578:
            with (objBetterBlockAvoP06) spd = 2;
            break;
        case 3809:
            with (objBetterBlockAvoP05b) friction = 0.0575;
            with (objBetterBlockAvoP06){
                fadeOut = true;
                alarm[0] = 0;
            }
            break;
        case 4040:
            with (objPlayer) instance_destroy();
            break;
        case 4052:
            image_alpha = 0;
            with (objBetterBlockAvoP05b){
                instance_destroy();
            }
            break;
        case 4070:
            instance_create(400, 278, objPlayer);
            with (objPlayer) frozen = true;
            var t_block = instance_create(384, 288, objBetterBlock);
            t_block.visible = true;
            break;
        case 4150:
            audio_play_sound(sndDeath,0,0);
            with (objPlayer) frozen = false;
            with (instance_create(384,224,objWarp)) roomTo = rBetterBlockStage;
            global.bossItem[0] = true;
            instance_destroy();
            break;
    }
    
    //Repeated actions - using modulus to replace an "alarm".
    if (timer &lt;= 443){
        blackAlpha -= 1/443;
    }else if (timer &gt;= 462 &amp;&amp; timer &lt;= 861 &amp;&amp; timer mod 8 == 6){
        with (instance_create(x-16,y-16,objBetterBlockAvoB01)){
            num = 5;
        }
    }else if (timer &gt;= 931 &amp;&amp; timer &lt;= 1032 &amp;&amp; timer mod 10 == 1){
        angle += 7;
        for(i=0;i&lt;5;i++){
            with (instance_create(400,304,objBetterBlockAvoP02)){
                image_blend = make_color_rgb(64,255,255);
                direction = other.i*72 + other.angle;
                speed = 5.5;
            }
        }
    }else if (timer &gt;= 1155 &amp;&amp; timer &lt;= 1243 &amp;&amp; timer mod 8 == 3){
        angle += 10;
        for(i=0;i&lt;3;i++){
            with (instance_create(400,304,objBetterBlockAvoP02)){
                image_blend = make_color_rgb(255,128,255);
                direction = other.i*120 + other.angle;
                speed = 7;
            }
        }
    }else if (timer &gt;= 1387 &amp;&amp; timer &lt;= 1494 &amp;&amp; timer mod 9 == 1){
        with (instance_create(i*64 + 20, 608, objBetterBlockDonutBlock)){
            active = false;
            vspeed = -3.5;
            friction = 0.11;
        }
        i ++;
    }else if (timer &gt;= 1503 &amp;&amp; timer &lt;= 1610 &amp;&amp; timer mod 5 == 2){
        instance_create(x-97, y+140, objBetterBlockAvoB03);
    }else if (timer &gt;= 1619 &amp;&amp; timer &lt;= 1722 &amp;&amp; timer mod 5 == 4){
        instance_create(choose(-16, 784), 608, objBetterBlockAvoP04);
    }else if (timer &gt;= 2078 &amp;&amp; timer &lt;= 2155 &amp;&amp; timer mod 7 == 6){
        instance_create(irandom_range(0,x), -16, objBetterBlockAvoP03);
    }else if (timer &gt;= 2531 &amp;&amp; timer &lt;= 2642 &amp;&amp; timer mod 20 = 11){
        repeat(irandom_range(3, 6)){
            var t_block = instance_create(i*128, 616, objBetterBlockAvoP05b);
            t_block.direction = random_range(22.5, 157.5);
            t_block.speed = 3;
            t_block.image_blend = choose(c_red, c_orange, c_yellow, c_lime, c_aqua, c_blue, c_purple, c_fuchsia);
        }
        i ++;
    }else if (timer &gt;= 2892 &amp;&amp; timer &lt;= 3335 &amp;&amp; timer mod 18 == 12){
        instance_create(irandom_range(0,736),624,objBetterBlockAvoP05);
    }
    if (abs(audio_sound_get_track_position(bgm) - timer/50) &gt; 0.12)
        audio_sound_set_track_position(bgm, timer/50);
    timer ++;
}else{
    audio_stop_sound(musBetterBlockMiku);
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.noPause = false;
audio_stop_sound(musBetterBlockMiku);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (timer &lt; 443 &amp;&amp; blackAlpha &gt; 0){
    draw_set_alpha(blackAlpha);
    draw_set_color(c_black);
    draw_rectangle(-1, -1, 801, 609, false); //1 extra pixel on all sides to fix window resizing glitches
    draw_set_color(c_white);
    draw_set_alpha(1);
}else if ((timer &gt;= 4040 &amp;&amp; timer &lt;= 4048) || (timer &gt;= 4052 &amp;&amp; timer &lt;= 4060) || (timer &gt;= 4070 &amp;&amp; timer &lt;= 4078)){
    draw_set_color(c_white);
    draw_rectangle(-1, -1, 801, 609, false); //flashing effect
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
